const app=function(){const t=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});return getAll("input[type=date]").forEach(t=>{t.onfocus=(a=>t.showPicker()),t.onclick=(a=>t.showPicker())}),document.addEventListener("alpine:init",()=>{Alpine.data("dropdown",()=>({dropdownOpen:!1,toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}})),Alpine.data("collapse",()=>({collapseOpen:!1,toggleCollapse(){this.collapseOpen=!this.collapseOpen}})),Alpine.data("modal",t=>({modalOpen:!1,is_loading:!1,alert:"",init(){this.$watch("modalOpen",t=>{t||(this.alert="",this.is_loading=!1,this.$dispatch("modal-close"))})},...t})),Alpine.data("lazyload",t=>({data:[],page:1,limit:10,isLoading:!1,getData(){this.isLoading=!0,fetch(`${t}?page=${this.page++}&limit=${this.limit}`).then(t=>t.json()).then(t=>{for(i in t)this.data.push(t[i]);this.isLoading=!1})}})),Alpine.data("table",(t,a={})=>({data:[],page:1,limit:10,sort:"",totalData:0,params:{},pagination:{first:0,last:0,active:0,pages:[]},isLoading:!1,getData(){this.isLoading=!0,fetch(`${t}?page=${this.page}&limit=${this.limit}&sort=${this.sort}&${new URLSearchParams(this.params).toString()}`).then(t=>t.json()).then(t=>{if(this.data=t.data,this.totalData=t.total_data,this.totalData>0){this.pagination.first=1,this.pagination.last=Math.ceil(this.totalData/this.limit);let t=Math.ceil(this.totalData/this.limit);this.pagination.pages[0]=t>0&&1==this.page||t<3?1:this.page>1&&this.page<t?this.page-1:this.page-2,this.pagination.pages[1]=t<2?0:this.page<2?2:this.page<t?this.page:this.page-1,this.pagination.pages[2]=t<3?0:this.page<3?3:this.page<t?this.page+1:this.page}this.isLoading=!1})},...a}))}),{debounce:this.debounce,message:(t="",a=4e3)=>{Toastify({text:`<i class='bi-bell-fill text-2xl text-blue-900 mr-4 animate-pulse'></i>${t}`,duration:a,escapeMarkup:!1,className:"w-80 py-3 text-sm leading-tight bg-none !bg-white !text-inherit rounded-md shadow-lg border border-gray-200 flex items-center"}).showToast()},confirm:(t={})=>{let a={title:"Apakah anda yakin?",message:"Aksi ini tidak dapat diurungkan",icon:"warning",confirmText:"Ya, lanjutkan!",cancelText:"Batalkan",confirmColor:"danger",cancelColor:"secondary",callback:()=>{},callbackCancel:()=>{}},e={primary:"#0b51b7",secondary:"#7081b9",danger:"#ef4d56"};for(let e in a)t.hasOwnProperty(e)&&(a[e]=t[e]);Swal.fire({title:a.title,text:a.message,icon:a.icon,showCancelButton:!0,confirmButtonColor:e[a.confirmColor],confirmButtonText:a.confirmText,cancelButtonColor:e[a.cancelColor],cancelButtonText:a.cancelText}).then(t=>{t.isConfirmed?a.callback():t.dismiss===Swal.DismissReason.cancel&&a.callbackCancel()})},formToObject:(t,a={})=>{let e=a,i=new FormData(t);return i.forEach((t,a)=>e[a]=t),e},setActiveMenu:t=>{},setPro:t=>{if(t){return alert("Status Aplikasi expired, segera lakukan pembayaran!");}else{}},toFooter:t=>{return "Coodink Sebangsa Teknomedia"},toRupiah:(a,e=!0)=>e?t.format(a):t.format(a).replace(/(Rp)/,"").trim(),toNumber:t=>Number(t.replace(/[^0-9,-]+/g,"").replace(/[,]+/g,".")),setForm:(t,a)=>{let e;for(key in a)e=t.querySelector(`[name=${key}]`),e&&("INPUT"===e.tagName&&["checkbox","radio"].includes(e.type)?(e=t.querySelector(`[name=${key}][value=${a[key]}]`),e&&(e.checked=!0)):e.value=a[key])},slimSearch:(t="",a="")=>{let e=t;return(t,i)=>new Promise((n,o)=>{if(t.length<2)return o("Kata kunci minimal 2 karakter");fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a},body:JSON.stringify({search:t})}).then(t=>t.json()).then(t=>{const a=t.filter(t=>!i.some(a=>a.value===t.value)).map(t=>({text:t.text,value:t.value}));n(a)})})}}}();
