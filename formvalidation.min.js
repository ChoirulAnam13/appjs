class FormValidation{constructor(e={}){try{this.options={form:null,formEnclosure:"form-group",lang:"id"};for(let a in this.options)e.hasOwnProperty(a)&&(this.options[a]=e[a]);if(this.options.form instanceof Element||this.options.form instanceof Document||(this.options.form=document.querySelector(this.options.form)),!this.options.form)throw"Form not found!";this.options.form.onsubmit=(e=>{e.stopPropagation(),e.preventDefault(),this.validate()&&this.options.form.dispatchEvent(new Event("formvalidated"))})}catch(e){console.log(e)}}validate(){let e=!0;return this.options.form.querySelectorAll("[data-validation-rules]").forEach(a=>{if(["INPUT","SELECT","TEXTAREA"].includes(a.tagName)){this.message(a,"");let t=a.dataset.validationRules.split("|");for(let s in t){if("required"==t[s]&&!a.value){this.message(a,this._getMessage("required")),e=!1;break}if(t[s].startsWith("minlen")){let i=t[s].split("-");if(a.value.length<i[1]){this.message(a,this._getMessage("minlen",i[1])),e=!1;break}}if(t[s].startsWith("maxlen")){let i=t[s].split("-");if(a.value.length>i[1]){this.message(a,this._getMessage("maxlen",i[1])),e=!1;break}}if(["alpha","num","alphanum","currency"].includes(t[s])){let i={alpha:/^[A-Za-z]+$/i,num:/^[0-9]+$/i,alphanum:/^[A-Za-z0-9]+$/i,currency:/^[0-9.,]+$/i};if(!a.value.match(i[t[s]])){this.message(a,this._getMessage(t[s])),e=!1;break}}if(t[s].startsWith("passmatch")){let i=this.options.form.querySelector(`#${t[s].split("-")[1]}`);if(a.value!==i.value){this.message(a,this._getMessage("passmatch")),e=!1;break}}}}}),e}message(e,a=""){try{let t=e.closest(`.${this.options.formEnclosure}`);if(!t)throw"Form enclosure not found!";t.querySelector("._validationMessage")||t.insertAdjacentHTML("beforeend","<small class='_validationMessage' style='display:block;color:red;margin-top:3px'></small>"),t.querySelector("._validationMessage").innerHTML=a}catch(e){console.log(e)}}clear(){this.options.form.querySelectorAll("._validationMessage").forEach(e=>e.innerHTML="")}_getMessage(e,a){try{return{required:{id:"Isian tidak boleh kosong",en:"This field is required"},minlen:{id:`Minimal isian harus ${a} karakter`,en:`The input must be at least ${a} character(s)`},maxlen:{id:`Maksimal isian tak lebih dari ${a} karakter`,en:`The input must be no more than ${a} character(s)`},alpha:{id:"Karakter yang diperbolehkan hanya huruf",en:"The only characters allowed are letters"},num:{id:"Karakter yang diperbolehkan hanya angka",en:"The only characters allowed are numbers"},alphanum:{id:"Karakter yang diperbolehkan hanya huruf dan angka",en:"The only characters allowed are letters and numbers"},currency:{id:"Karakter yang diperbolehkan hanya angka, titik dan koma",en:"The only characters allowed are numbers, perriod and comma"},passmatch:{id:"Kata sandi tidak sama",en:"The password doesn't match"}}[e][this.options.lang]}catch(e){return"Error message is not defined!"}}}